<h2>Task List</h2>
<!-- <ul>
  <li *ngFor="let task of tasks">
    {{ task.description }}
  </li>
</ul> -->
<button (click)="openModal()">Add New Task</button>
<app-add-new-task *ngIf="isModalOpen" (addTask)="addTask($event)" (closeTask)="closeTask($event)"></app-add-new-task>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th (click)="setSort('priorityLevel')">Priority Level</th>
      <th (click)="setSort('dueDate')">Due Date</th>
      <th >Status</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of tasks | filter: filterText | sort: { column: sortBy, direction: sortDirection }">
      <td><span *ngIf="!item.editable">{{ item.title }}</span>
        <input *ngIf="item.editable" [(ngModel)]="item.title" /></td>
      <td><span *ngIf="!item.editable">{{ item.description }}</span>
        <input *ngIf="item.editable" [(ngModel)]="item.description" /></td>
      <td>{{ item.priorityLevel }}</td>
      <td>{{ item.dueDate }}</td>
      <td>
        <select [(ngModel)]="item.status">
          <option value="Open">Open</option>
          <option value="inprogress">In Progress</option>
          <option value="completed">Completed</option>
        </select>
      </td>
      <td>
        <button (click)="editItem(item.id)">{{ item.editable ? 'Save' : 'Edit' }}</button>
        <button (click)="viewItem(item.id)">View</button>
        <button (click)="deleteItem(item.id)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef>Title</th>
    <td mat-cell *matCellDef="let element">{{ element.title }}</td>
  </ng-container>

  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef>Description</th>
    <td mat-cell *matCellDef="let element">{{ element.description }}</td>
  </ng-container>

  <ng-container matColumnDef="priorityLevel">
    <th mat-header-cell *matHeaderCellDef>Priority Level</th>
    <td mat-cell *matCellDef="let element">{{ element.priorityLevel }}</td>
  </ng-container>

  <!-- <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let element">{{ element.status }}</td>
  </ng-container> -->

  <!-- <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let element">
      <mat-form-field appearance="fill">
        <mat-label>Status</mat-label>
        <mat-select [(value)]="element.status" (selectionChange)="onStatusChange(element)">
          <mat-option value="Open">Opened</mat-option>
          <mat-option value="inprogress">In Progress</mat-option>
          <mat-option value="completed">Completed</mat-option>
        </mat-select>
      </mat-form-field>
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let element">
      <button mat-button (click)="editItem(element.id)">Edit</button>
      <button mat-button (click)="viewItem(element.id)">View</button>
      <button mat-button (click)="deleteItem(element.id)">Delete</button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>  -->